{% extends "layout.html" %} 
{% block content %}
<div class="content-section">
  <div class="media">
    <div class="media-body">
      <a class="nav-item nav-link" href="{{ url_for('update_patient', patient_id=patient.id) }}">更改患者个人信息</a>
      {% if current_user.id == 1 %}
        <a class="nav-item nav-link" href="{{ url_for('delete_patient', patient_id=patient.id) }}">删除患者个人信息</a><hr><br>
        {% endif %}
      <h6 class="account-heading">姓名: {{ patient.name }}</h6><hr>
        <p>手机号: {{ patient.number }} </p>
        <hr>
        <script>  
          var dob = new Date("{{ patient.birth }}"); 
          //calculate month difference from current date in time  
          var month_diff = Date.now() - dob.getTime();  
            
          //convert the calculated difference in date format  
          var age_dt = new Date(month_diff);   
            
          //extract year from date      
          var year = age_dt.getUTCFullYear();  
            
          //now calculate the age of the user  
          var age = Math.abs(year - 1970);  
            
          //display the calculated age  
          document.write("年龄: " + age + "岁");  
      </script> 
        <hr>
        <p>身份证: {{ patient.IDcard }}</p>
        <hr>
        <p>填写日期: {{patient.create.strftime('%Y-%m-%d %H:%M') }}</p>
        <hr>
        <a class="nav-item nav-link" href="{{ url_for('add_patient_detail', patient_id=patient.id) }}">添加患者病患信息</a><br>
        <a class="nav-item nav-link" href="{{ url_for('patientdetail', patient_id=patient.id) }}">查看患者病患信息</a><br>
        
      </div>
      <br>
    </div>
  </div>
</div>
{% endblock content %}
<!--
<script>
  // Side navigation
  function w3_open() {
    var x = document.getElementById("mySidebar");
    x.style.width = "100%";
    x.style.fontSize = "40px";
    x.style.paddingTop = "10%";
    x.style.display = "block";
  }
  function w3_close() {
    document.getElementById("mySidebar").style.display = "none";
  }
  
  // Tabs
  function openCity(evt, cityName) {
    var i;
    var x = document.getElementsByClassName("city");
    for (i = 0; i < x.length; i++) {
      x[i].style.display = "none";
    }
    var activebtn = document.getElementsByClassName("testbtn");
    for (i = 0; i < x.length; i++) {
      activebtn[i].className = activebtn[i].className.replace(" w3-dark-grey", "");
    }
    document.getElementById(cityName).style.display = "block";
    evt.currentTarget.className += " w3-dark-grey";
  }
  
  var mybtn = document.getElementsByClassName("testbtn")[0];
  mybtn.click();
  
  // Accordions
  function myAccFunc(id) {
    var x = document.getElementById(id);
    if (x.className.indexOf("w3-show") == -1) {
      x.className += " w3-show";
    } else { 
      x.className = x.className.replace(" w3-show", "");
    }
  }
  
  // Slideshows
  var slideIndex = 1;
  
  function plusDivs(n) {
    slideIndex = slideIndex + n;
    showDivs(slideIndex);
  }
  
  function showDivs(n) {
    var x = document.getElementsByClassName("mySlides");
    if (n > x.length) {slideIndex = 1}    
    if (n < 1) {slideIndex = x.length} ;
    for (i = 0; i < x.length; i++) {
      x[i].style.display = "none";  
    }
    x[slideIndex-1].style.display = "block";  
  }
  
  showDivs(1);
  
  // Progress Bars
  function move() {
    var elem = document.getElementById("myBar");   
    var width = 5;
    var id = setInterval(frame, 10);
    function frame() {
      if (width == 100) {
        clearInterval(id);
      } else {
        width++; 
        elem.style.width = width + '%'; 
        elem.innerHTML = width * 1  + '%';
      }
    }
  }
  </script>
</body>
</html> -->